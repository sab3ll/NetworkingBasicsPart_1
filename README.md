# Основы сетей. Часть 1 — «Первый опыт»
Аннотация: Данный проект включает в себя разбор основ сетей, модели OSI / TCP/IP на примере работы в среде GNS3, а также изучение протоколов IP, ARP, ICMP.

## Содержание
1. [Задание 1. Расчет адресов](#задание-1-расчет-адресов)
2. [Задание 2. Знакомство с GNS3](#задание-2-знакомство-с-gns3)
3. [Задание 3. Multicast-запросы](#задание-3-multicast-запросы)
4. [Задание 4. ARP](#задание-4-arp)

### Задание 1. Расчет адресов
Для решения данного задания нужны знания в следующих темах: IP-адреса, бинарная система счисления, деление сети на подсети, маска сети.

IP (internet protocol) — протокол сетевого уровня. Да-да, именно по нему вычисляли еще 10 лет назад любого хулигана в сети. Однако основная его задача — реализовать передачу трафика между разными IP-сетями. Происходит это благодаря IP-адресам. Эти адреса подобны твоему адресу прописки. Причем аналогия абсолютно прямая: в рамках всей планеты абсолютно одинаковых адресов не бывает, однако в нескольких разных городах могут быть одинаковые номера домов, улиц и квартир (например, г. Москва, ул. Советская, д. 12 или г. Питер, ул. Советская, д. 12).

Для закрепления понимания того, что такое CIDR-нотация и сетевая адресация, тебе необходимо решить несколько практических заданий, приведённых ниже:

1. Рассчитать бинарную нотацию для адресов:
    * 178.101.89.7
    * 201.57.153.161
2. Представь, что тебе нужно выделить подсети под различные сегменты организации N — технологический (3 машины), серверный (16 машин) и пользовательский (из 32 машин).
3. Сети с какими масками необходимо выделить для каждого из сегментов? Приведи обоснование своего ответа.

Решение заданий и обоснование запиши в текстовый файл с именем `ip-1`.

### Задание 2. Знакомство с GNS3
Для решения данного задания нужны знания в следующих темах: GNS3, импортирование Cisco образа в GNS3.

**Важно**: при выполнении заданий не забывай сохранять конфигурации устройств.

Для подготовки виртуальной среды, в которой ты будешь выполнять лабораторные работы по этому и следующим трем блокам, тебе необходимо настроить и подготовить тестовую среду GNS3 и изучить принципы работы в ней. GNS3 — это виртуальная среда, которая, по аналогии с виртуальными машинами, позволяет тебе эмулировать работу сетевого оборудования. Для подготовки виртуальной среды GNS3 нужно выполнить ее установку (если она не была предварительно выполнена), создание проекта и импорт образов Cisco IOS.

Образы Cisco IOS скачай по этой ссылке, IOS 3745: https://blog.netskills.ru/2011/12/ios-gns3-ios-for-gns3.html.

Статья по теме: https://docs.gns3.com/docs/getting-started/your-first-gns3-topology.

После установки задай права для dumpcap:
```
sudo chmod +x /usr/bin/dumpcap
```

**Важно**: не устанавливай GNS как службу systemd, т. к. при такой инсталляции в некоторых версиях есть баг с созданием проекта.

Инструкции по установке: https://docs.gns3.com/docs/getting-started/installation/linux.

В качестве ответа загрузи в репозиторий проект в GNS3, на котором размещено импортированное устройство Cisco 3745.

### Задание 3. Multicast-запросы
Для решения данного задания нужны знания в следующих темах: broadcast, multicast, ICMP, Wireshark.

Broadcast — широковещательный адрес, используемый для передачи трафика всем узлам в сети (реализован как на L2, так и на L3). Это своего рода крик в громкоговоритель, который услышат только те, кто находятся с тобой в одной сети. Для этого «крика» в каждой сети всегда отводится отдельный адрес, как правило, самый последний (например, для сети 192.168.1.0/24 это 192.168.1.255).

Multicast — адрес, используемый для передачи трафика к группе узлов в сети. По сути, урезанный вариант broadcast.

ICMP — Internet Control Message Protocol, протокол, используемый для передачи информации об ошибках при передаче трафика. Популярным способом проверки сетевой доступности является ping — это команда, которая присутствует в каждой операционной системе и позволяет отправить ICMP echo запросы. Они в себе не содержат никакой полезной информации, это своего рода «тычок пальцем» в устройство.

Твоя задача:
- Создай проект.
- Добавь на него два сетевых устройства (используй образ Cisco 3745), соедини их, настрой их сетевые интерфейсы.
- Запусти эмуляцию и собери пакетную трассу, обратившись на multicast IP-адрес по ICMP.
- С помощью Wireshark изучи результирующий файл пакетной трассы, обратив внимание на поля, отражающие информацию по L2, L3 и ICMP.
- Ответь на вопрос: на какой destination MAC-адрес отправляется ICMP-запрос? Ответ запиши в текстовый файл с именем `multicast`.
- Сохрани результирующий файл собранной пакетной трассы в файл с расширением .pcap с именем `multicast`.

В качестве итогового ответа выложи в репозиторий файл `multicast.pcap` и текстовый файл `multicast` с ответом на вопрос.

_Подсказка_: для того чтобы устройство отвечало на обращения по multicast-адресу, необходимо добавить интерфейс в multicast-группу.

При возникновении сложностей в работе можешь использовать этот Help: https://docs.gns3.com/docs/getting-started/your-first-cisco-topology.

**Советы**:
* Не назначай сетевым интерфейсам «сложных» IP-адресов, лучше используй простые, например, 10.10.10.0/24. \
* В интерфейсе командной строки введи «?» для вывода справки. \
* Для завершения ввода команды используй клавишу TAB.

Дополнительно после выполнения этого задания рекомендуем самостоятельно изучить, что такое Broadcast Storm.

### Задание 4. ARP
Для решения данного задания нужны знания в следующих темах: ARP, 2 уровень модели OSI, Wireshark, GNS3.

ARP — address resolution protocol, позволяет определить MAC-адрес на основании известного IP-адреса. У каждого устройства есть ARP-таблица, которая является «дневником» — там записаны IP-адреса с привязанными к ним MAC-адресами.

Продолжаем осваивать базовые сетевые протоколы на примере ARP. Разберем его также в формате анализа трафика между двумя сетевыми узлами в нашем проекте GNS3.

Твое задание:
- Запусти сбор пакетной трассы, выполни с одного из узлов команду ping до IP соседнего устройства. Убедись, что после этого в ARP таблице присутствует соответствующая ARP-запись.
- В Wireshark ознакомься с содержимым ARP- и ICMP-пакетов.
- На какой MAC адрес в первом ARP пакете отправляется запрос? Как называется данный адрес? Ответы запиши в текстовый файл с именем `arp`.
- Обрати внимание, от какого MAC-адреса исходит ответный пакет. Сохрани результирующий файл .pcap Wireshark с именем `arp`.

Итого загрузи в репозиторий три файла: проект `gns3`, файл `arp.pcap` и текстовый файл `arp`.

Дополнительно при выполнении этого задания рекомендуем самостоятельно изучить, что такое Gratuitous ARP.
