# Основы сетей. Часть 1.
Аннотация: Данный отчет включает в себя разбор основ сетей, модели OSI / TCP/IP на примере работы в среде GNS3, а также изучение протоколов IP, ARP, ICMP.

## Содержание
   1. [Задание 1. Расчет адресов](#задание-1-расчет-адресов)
   2. [Задание 2. Знакомство с GNS3](#задание-2-знакомство-с-gns3)
   3. [Задание 3. Multicast-запросы](#задание-3-multicast-запросы)
   4. [Задание 4. ARP](#задание-4-arp)

### Задание 1. Расчет адресов

Бинарная нотация адресов \
178.101.89.7        10110010.01100101.01011001.00000111 \
201.57.153.161      11001001.00111001.10011001.10100001

Маски подсетей \
Технологический сегмент - /29 \
8 адресов, из них: \
1 для адреса сети, \
1 для широковещательного адреса, \
3 для хостов, \
3 свободных адреса.

Серверный сегмент - /27 \
32 адреса, из них: \
1 для адреса сети, \
1 для широковещательного адреса, \
16 для хостов, \
14 свободных адресов.

Пользовательский сегмент - /26 \
64 адреса, из них: \
1 для адреса сети, \
1 для широковещательного адреса, \
32 для хостов, \
30 свободных адресов.

### Задание 2. Знакомство с GNS3

Установка GNS3 осуществлена на ОС Linux Ubuntu 22.04 LTS по инструкции с официального сайта:

https://docs.gns3.com/docs/getting-started/installation/linux/

Загрузка образа Cisco IOS c3745 с источника, предлагаемого в README:

https://blog.netskills.ru/2011/12/ios-gns3-ios-for-gns3.html

![ex02](/src/misc/images/ex02_1.png)

Для добавления нового маршрутизатора на основе скачанного образа необходимо перейти в меню "Edit" ---> "Preferences..." ---> "Dynamips" ---> "IOS routers" ---> "New"

![ex02](/src/misc/images/ex02_2.png)

Указание пути к образу IOS:

![ex02](/src/misc/images/ex02_3.png)

Выбор наименования и модели маршрутизатора:

![ex02](/src/misc/images/ex02_4.png)

Выбор размера оперативной памяти для маршрутизатора. Предпочтительный вариант - оставить по умолчанию.

![ex02](/src/misc/images/ex02_5.png)

Выбор дополнительных сетевых адаптеров, остается по умолчанию один GT96100-FE:

![ex02](/src/misc/images/ex02_6.png)

Выбор модулей WIC, остается по умолчанию пустым:

![ex02](/src/misc/images/ex02_7.png)

Заключительный шаг - вычисление "Idle-PC value", которое предотвратит 100% загрузку CPU при эмулировании маршрутизатора, для этого необходимо нажать "Idle PC-finder:

![ex02](/src/misc/images/ex02_8.png)

В результате было получено значение "Idle-PC" - 0x60aa72bc. В процессе выполнения работы была выявлена особенность - при установлении оперативной памяти более 256 МБ "Idle-PC" не вычислялся.

![ex02](/src/misc/images/ex02_9.png)

Добавленный образ маршрутизатора Cisco C3745:

![ex02](/src/misc/images/ex02_10.png)

Добавленный маршрутизатор в рабочее поле:

![ex02](/src/misc/images/ex02_11.png)

Для запуска маршрутизатор необходимо нажать на него правым кликом ---> "Start". Чтобы зайти в админку роутера необходимо также нажать на него правым кликом ---> "Console"

![ex02](/src/misc/images/ex02_12.png)

### Задание 3. Multicast-запросы

Добавление двух маршрутизаторов в рабочее поле и их соединение:

![ex03](/src/misc/images/ex03_1.png)

Для выполнения задания необходимо настроить маршрутизаторы для работы с multicast адресами.

3.1 Показать все интерфейсы (понадобится на будущих этапах):
```
show ip interface brief
```

3.2 Вход в режим конфигурации маршрутизатора:
```
configure terminal
```

3.3 Включение мультикастовой маршрутизации:
```
ip multicast-routing
```

3.4 Вход в режим конфигурации конкретного интерфейса, в данном случае того интерфейса, к которому подключен другой маршрутизатор:
```
interface FastEthernet0/0
```

3.5.1 Присвоение интерфейсу адреса и маски подсети (для интерфейса FastEthernet0/0 1-го маршрутизатора):
```
ip address 10.10.10.1 255.255.255.0
```

3.5.2 Присвоение интерфейсу адреса и маски подсети (для интерфейса FastEthernet0/0 2-го маршрутизатора):
```
ip address 10.10.10.2 255.255.255.0
```

3.6 Включить sparse-mode
```
ip pim sparse-mode
```

3.7 Присоединение к мультикаст группе (одинаково для двух маршрутизаторов):
```
ip igmp join-group 233.0.0.1
```

3.8 Включение интерфейса для передачи данных:
```
no shutdown
```

3.9 Выход из конфигурации интерфейса:
```
exit
```

3.10 Назначение rendezvous point (одинаково для двух маршрутизаторов):
```
ip pim rp-address 10.10.10.1
```

3.11 Выход из глобальной конфигурации:
```
exit
```

3.12 Сохранение конфигурации маршрутизатора
```
copy running-config startup-config
```

Состояние поля перед конфигурацией:

![ex03](/src/misc/images/ex03_2.png)

Процесс конфигурации маршрутизатора R1:

![ex03](/src/misc/images/ex03_3.png)

Процесс конфигурации маршрутизатора R2:

![ex03](/src/misc/images/ex03_4.png)

Для захвата пакетной трассы необходимо правой кнопкой мыши нажать на связь между маршрутизаторами ---> "Start capture":

![ex03](/src/misc/images/ex03_5.png)

Результат использования утилиты ping протокола ICMP по multicast адресу 233.0.0.1:

![ex03](/src/misc/images/ex03_6.png)

### Задание 4. ARP

Для выполнения задания был создан новый проект, сконфигурирован маршрутизатор R1 аналогично R1 из задания 3, за исключением пунктов 3.3, 3.6, 3.7, 3.10.

Для просмотра ARP таблицы маршрутизатора R1 необходимо использовать команду:

```
show ip arp
```

![ex04](/src/misc/images/ex04_1.png)

После присвоения IP адреса маршрутизатору R1 происходит Gratuitous ARP запрос. Данный запрос используется для уведомления подключенных устройств о новом IP адресе у устройства, во время которого можно выявить конфликт IP адресов. Так как IP адрес есть пока только у R1, R2 безразлично его существование. Далее производится запуск сбора пакетной трассы и конфигурация R2, с целью отловить Gratuitous ARP запрос от R2.

![ex04](/src/misc/images/ex04_2.png)

Перед отправкой ping на R2 с R1, происходит arp запрос на широковещательный (broadcast) MAC адрес. В результате этого с маршрутизатора R2 приходит ARP ответ, что IP адресу 10.10.10.2 соответствует MAC адрес c4:02:3b:5f:00:00.

![ex04](/src/misc/images/ex04_3.png)

Результатом ответа R2 становится обновление ARP таблицы R1.

![ex04](/src/misc/images/ex04_4.png)
